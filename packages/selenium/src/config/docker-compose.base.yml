version: '2.1'

services:
  selenium:
    image: selenium/hub:3.141.59-neon
    ports:
      - "${HUB_PORT:-4444}:4444"
    devices:
      # Try to prevent Selenium from blocking when creating sessions due to
      # limited entropy.
      - /dev/urandom:/dev/random
    volumes:
      - /dev/shm:/dev/shm
      - html:/var/www/html

  chrome:
    image: selenium/node-chrome:3.141.59-neon
    volumes:
      - /dev/shm:/dev/shm
      - html:/var/www/html
    environment:
      - HUB_PORT=4444
      - HUB_HOST=selenium

  firefox:
    image: selenium/node-firefox:3.141.59-neon
    volumes:
      - /dev/shm:/dev/shm
      - html:/var/www/html
    environment:
      - HUB_PORT=4444
      - HUB_HOST=selenium

  debug_chrome:
    image: "selenium/node-chrome-debug:3.141.59-neon"
    volumes:
      - /dev/shm:/dev/shm
      - html:/var/www/html
    environment:
      - HUB_PORT=4444
      - HUB_HOST=selenium
      - SE_OPTS=-debug

  debug_firefox:
    image: "selenium/node-firefox-debug:3.141.59-neon"
    volumes:
      - /dev/shm:/dev/shm
      - html:/var/www/html
    environment:
      - HUB_PORT=4444
      - HUB_HOST=selenium
      - SE_OPTS=-debug
